@using eDoctor.Enums

@model MySchedulesViewModel

@{
    ViewData["UseContainer"] = true;
    var upcoming = Model.Schedules.Where(s => s.Status == ScheduleStatus.ORDERED.ConvertToString() || s.Status == ScheduleStatus.ONGOING.ConvertToString());
    var history = Model.Schedules.Where(s => s.Status == ScheduleStatus.COMPLETED.ConvertToString());
}

<h6 class="fw-bold mb-3">My Schedules</h6>

<div class="card border-0 shadow-sm rounded-4 mb-3">
    <div class="card-header bg-white border-bottom px-4 py-3 rounded-top-4 d-flex align-items-center justify-content-between">
        <h6 class="mb-0 fw-bold text-dark">
            <i class="bi bi-calendar-check me-2 text-primary"></i>Upcoming
        </h6>
        <span class="badge bg-primary-subtle text-primary rounded-pill">@upcoming.Count()</span>
    </div>

    <div class="card-body p-0">
        @if (upcoming.Any())
        {
            <ul class="list-group list-group-flush">
                @foreach (var item in upcoming)
                {
                    <a class="list-group-item list-group-item-action px-4 py-3 d-flex align-items-center justify-content-between text-decoration-none text-dark" asp-controller="Schedule" asp-action="MyDetailSchedule" asp-route-ScheduleId="@item.ScheduleId">
                        <div class="d-flex align-items-center gap-3">
                            <div class="bg-primary-subtle rounded-3 p-2 d-flex align-items-center justify-content-center" style="width: 36px; height: 36px; flex-shrink: 0;">
                                <i class="bi bi-clock text-primary"></i>
                            </div>
                            <span class="fw-semibold">@item.Time</span>
                        </div>
                        @if (item.Status == ScheduleStatus.ONGOING.ConvertToString())
                        {
                            <span class="badge rounded-pill px-3 py-2 fw-semibold bg-success-subtle text-success">@item.Status</span>
                        }
                        else
                        {
                            <span class="badge rounded-pill px-3 py-2 fw-semibold bg-info-subtle text-info">@item.Status</span>
                        }
                    </a>
                }
            </ul>
        }
        else
        {
            <div class="text-center py-4 text-muted">
                <i class="bi bi-calendar-x fs-1 d-block mb-3 opacity-50"></i>
                <p class="fw-semibold mb-1">No upcoming schedules</p>
                <small>You have no upcoming appointments.</small>
            </div>
        }
    </div>
</div>

<div class="card border-0 shadow-sm rounded-4">
    <div class="card-header bg-white border-bottom px-4 py-3 rounded-top-4 d-flex align-items-center justify-content-between">
        <h6 class="mb-0 fw-bold text-dark">
            <i class="bi bi-clock-history me-2 text-secondary"></i>History
        </h6>
        <span class="badge bg-secondary-subtle text-secondary rounded-pill">@history.Count()</span>
    </div>

    <div class="card-body p-0">
        @if (history.Any())
        {
            <ul class="list-group list-group-flush">
                @foreach (var item in history)
                {
                    <a class="list-group-item list-group-item-action px-4 py-3 d-flex align-items-center justify-content-between text-decoration-none text-dark" asp-controller="Schedule" asp-action="MyDetailSchedule" asp-route-ScheduleId="@item.ScheduleId">
                        <div class="d-flex align-items-center gap-3">
                            <div class="bg-secondary-subtle rounded-3 p-2 d-flex align-items-center justify-content-center" style="width: 36px; height: 36px; flex-shrink: 0;">
                                <i class="bi bi-clock-history text-secondary"></i>
                            </div>
                            <span class="fw-semibold text-muted">@item.Time</span>
                        </div>
                        <span class="badge rounded-pill px-3 py-2 fw-semibold bg-secondary-subtle text-secondary">@item.Status</span>
                    </a>
                }
            </ul>
        }
        else
        {
            <div class="text-center py-4 text-muted">
                <i class="bi bi-clock-history fs-1 d-block mb-3 opacity-50"></i>
                <p class="fw-semibold mb-1">No history</p>
                <small>Your completed appointments will appear here.</small>
            </div>
        }
    </div>
</div>
